@startuml
|利用者|
  start
  :自動販売機の前に立つ;

|システム|
  :待機状態になる;

|利用者|
  :現金またはキャッシュレス手段でお金を投入する;

|システム|
  :投入された金額を確認;
  if (金額認識可?) then (Yes)
    :合計投入金額を表示;
    :購入可能な商品ボタン点灯・選択不可商品は消灯;
    ->利用者: 投入金額と選択可能商品を通知;
  else (No)
    :エラー（受取不可・認識失敗等）を表示し投入物を返却;
    ->利用者: エラー内容通知・お金返却を通知;
  endif

|利用者|
  if (通知が投入金額と選択可能商品の場合) then (Yes)
    :投入金額と選択可能商品を確認;
    :さらにお金を投入するか商品選択へ進む;
  else (エラーやお金返却通知)
    :返却されたお金やエラー内容を確認;
    :必要に応じ再投入またはキャンセルを検討;
  endif

stop

@enduml