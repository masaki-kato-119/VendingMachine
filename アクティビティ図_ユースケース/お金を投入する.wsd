@startuml
|利用者|
start
:自動販売機の前に立つ;
repeat
|システム|
:待機状態;

|利用者|
:現金またはキャッシュレス手段でお金を投入;

|システム|
:投入金額を認識;
if (金額認識成功?) then (Yes)
  :投入金額・選択可能商品を表示;
  :購入可能な商品ボタンを点灯;
  if (購入キャンセル) then (Yes)
    |利用者|
    :キャンセルボタンを押す;
    |システム|
    :入済みの金額（未使用分）を返却;
    stop
  else (No)
  endif
else (No)
  |システム|
  :投入物返却、エラー通知;
  |利用者|
  :再投入または取引をキャンセル;
  stop
endif

|利用者|
if (さらに投入 or 商品選択?) then (さらに投入)
  :さらにお金を投入;
else (商品選択)
  :商品選択へ進む;
  stop
endif
repeat while ()

@enduml