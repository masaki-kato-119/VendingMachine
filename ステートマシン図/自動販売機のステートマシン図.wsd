@startuml
[*] --> 販売中

state 販売中 {
    [*] --> お金投入待ち

    お金投入待ち --> 商品選択待ち : お金投入
    商品選択待ち --> 購入処理中 : 商品選択
    商品選択待ち --> 釣銭返却 : キャンセル
    購入処理中 --> 商品受け渡し : 購入処理完了
    商品受け渡し --> 釣銭返却 : 商品取り出し
    釣銭返却 --> お金投入待ち : 釣銭・返金受取
}

販売中 --> 販売停止中 : 故障検知/販売停止指示
販売停止中 --> 販売中 : 復旧/販売再開指示

state 販売停止中 {
    [*] --> 停止理由表示
}

@enduml